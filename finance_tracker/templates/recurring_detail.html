{% extends "base.html" %}

{% block title %}History for {{ rule.description }}{% endblock %}

{% block content %}
<article>
    <header>
        <hgroup>
            <h2>Generated Transaction History</h2>
            <h3>For Recurring Rule: "{{ rule.description }}"</h3>
        </hgroup>
    </header>

    {% if transactions %}
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Account</th>
                <th style="text-align: right;">Amount (₹)</th>
            </tr>
        </thead>
        <tbody>
            {% for trans in transactions %}
            <tr>
                <td>
                     <span class="local-datetime" datetime="{{ trans.transaction_date | datetimeformat }}">
                        {{ trans.transaction_date.strftime('%b %d, %Y') }}
                    </span>
                </td>
                <td>{{ trans.description }}</td>
                <td>{{ trans.account.name }}</td>
                <td class="{{ trans.transaction_type }}" style="text-align: right;">
                    {% if trans.transaction_type == 'income' %}+{% else %}-{% endif %}
                    ₹{{ "%.2f"|format(trans.amount) }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No transactions have been generated by this rule yet.</p>
    {% endif %}
    
    <footer>
        <a href="{{ url_for('main.recurring_transactions') }}" role="button" class="secondary outline">Back to All Recurring Rules</a>
    </footer>
</article>
{% endblock %}